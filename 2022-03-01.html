<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stevo's Blog</title>
    <link rel="stylesheet" type="text/css" href="default.css"/>
    <link rel="icon" type="image/x-icon" href="logo.png">
</head>
<body>
<div class="header">
    Outside Context Problem
</div>
<div class="post">
    <div class="title">The Beginning...</div>
    <hr/>
    <div class="content">
        <p>
            Hi, my name is Steve and I'm a recovering <a href="https://adventofcode.com/">Advent-of-Code-aholic</a>.
        </p>
        <p>
            I am a software engineer of 25+ years professionally and approximately 35 years as a hobby. My parents bought a <a href="https://en.wikipedia.org/wiki/Commodore_VIC-20">Commodore VIC-20</a> when I was about 8, and frankly I was hooked.
        </p>
        <p>
            In those pre-internet days, things came with manuals. As an eager reader, this seemed like heaven to me. I could read a book which would teach me how to make the computer perform my bidding.
            I quite enjoyed writing programs to generate and solve mazes which, it turns out, would come in handy nearly 40 years later.
        </p>
        <p>
            At the time, I was devouring the <a href="https://usborne.com/gb/books/computer-and-coding-books">Usborne</a> coding books, and the magazine <a href="https://en.wikipedia.org/wiki/Input_(magazine)">Input</a>.
        </p>
        <p>
            The VIC-20 was a gateway drug and I progressed to a <a href="https://en.wikipedia.org/wiki/ZX_Spectrum#ZX_Spectrum_+2A">ZX-Spectrum +2A</a> and then to a <a href="https://en.wikipedia.org/wiki/I386">386</a> PC.
        </p>
        <p>
            I spent a lot of time writing clones or interpretations of other games that I couldn't afford to buy and enjoyed the writing as much as the playing the results with my friends.
        </p>
        <p>
            Language-wise, I progressed from <a href="https://en.wikipedia.org/wiki/BASIC">BASIC</a> (on the VIC and Speccy) to <a href="https://en.wikipedia.org/wiki/Turbo_Pascal">Turbo Pascal</a> on the PC
            (a revelation... breakpoints, variable watches, much wow.)
        </p>
        <p>
            I also dabbled with <a href="https://en.wikipedia.org/wiki/Zilog_Z80">Z80</a> and 386 assembly language to extract more performance from those low megahertz computers, but man, that stuff is not easy without proper reference
            material (remember, this was pre-internet.)
        </p>
        <p>
            After the halcyon years, I went into programming professionally. Starting with a regression to <a href="https://en.wikipedia.org/wiki/Visual_Basic_(classic)">Visual BASIC</a>.
            Some dalliances with <a href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a>, <a href="https://en.wikipedia.org/wiki/C%2B%2B">C++</a>,
            <a href="https://en.wikipedia.org/wiki/Java_(programming_language)">Java</a>, most modern (and <a href="https://en.wikipedia.org/wiki/IBM_i">not-so-modern</a>) operating systems and also taking in <a href="https://www.w3schools.com/">web technologies</a> in along the way.
            I've also been fortunate enough to come across some interesting <a href="https://en.wikipedia.org/wiki/Optical_jukebox">hardware</a> during my travels.
        </p>
        <p>
            Nowadays, my weapon of choice is <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)">C#/dotnet</a>. I also am happy with most <a href="https://aws.amazon.com/">cloud technologies</a>
            and database paradigms that are thrown in my general direction.
        </p>
        <p>
            I've worked for small start-ups, multinational corporations and also done some consultancy work and contracting over the years.
        </p>
        <p>
            Aside from coding, my other passions are <a href="https://en.wikipedia.org/wiki/BMW_M3">cars</a> and <a href="https://en.wikipedia.org/wiki/PRS_Guitars">guitars</a>.
        </p>
        <p>
            I guess this unintentionally reads a bit like a CV or résumé, but I wanted to give some background as to how I managed to fall down this particular rabbit hole.
        </p>
        <p>
            I am now a senior software engineer at <a href="https://www.justeattakeaway.com/">Just Eat Takeaway</a>, and this is where the addiction story begins...
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">'Tis the Season</div>
    <hr/>
    <div class="content">
        <p>
            One of the things I appreciate about <a href="https://www.justeattakeaway.com/">JET</a> is their support of self development, be that through hackathons, training budgets or other initiatives.
            So, I'm not sure how (but probably through a <a href="https://slack.com/">Slack</a> channel), I got wind of <a href="https://adventofcode.com/">Advent of Code</a> in early December <a href="https://en.wikipedia.org/wiki/2021">last year</a>.
        </p>
        <p>
            A colleague had set up a private JET leaderboard and started to publicise it within the company.
            It seemed like a very fun thing to get involved with while also maybe learning something along the way.
        </p>
        <p>
            Little was I to know how deep this rabbit hole would go...
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Engaged</div>
    <hr/>
    <div class="content">
        <p>
            So, having discovered the <a href="https://adventofcode.com/">Advent of Code</a> site and being intrigued by the way the puzzles were framed, I found the early ones a nice distraction from my usual "business" coding.
            They seemed to go back to computing basics, and a lot of things that an everyday web developer or back end programmer just doesn't need to think about.
        </p>
        <p>
            It took me back to the things I enjoyed about coding before bills, mortgages, taxes etc... entered into my life!
        </p>
        <p>
            Also, I'm slightly ashamed to admit, I think the fact that there was a leaderboard may have stirred up a latent competitive spirit.
        </p>
        <p>
            Once I'd done the first couple of puzzles, I started to get it. <a href="https://twitter.com/ericwastl">Eric Wastl</a> obviously puts a large amount of effort into thinking through his puzzles, providing unique input
            for each participant, but also in framing the puzzle with a fun, Christmas themed story.
        </p>
        <p>
            I also realised that I didn't really want to create one or two new console applications every day to participate in this, so a framework was required...
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Reflection</div>
    <hr/>
    <div class="content">
        <p>
            The obvious route (to me, anyway) was to create a base class that puzzle solutions could inherit from. Then, I could have a <a href="https://en.wikipedia.org/wiki/Console_application">console</a> application that would scan
            the assembly using <a href="https://en.wikipedia.org/wiki/Reflective_programming">reflection</a> for concrete implementations of this class, execute them, and check the answer against a text file.
        </p>
        <p>So, this is the base class I came up with.</p>
        <pre>
public abstract class Solution
{
    protected string[] Input;

    public abstract string Description { get; }

    protected Solution()
    {
        var nameSpace = GetType().Namespace ?? string.Empty;

        var parts = nameSpace.Split('.');

        var path = parts.Skip(2).Select(s => s.Replace("_", string.Empty)).ToArray();

        Input = File.ReadAllLines($"{string.Join(Path.DirectorySeparatorChar, path)}{Path.DirectorySeparatorChar}input.txt");
    }

    public abstract string GetAnswer();
}
</pre>
        <p>
            The constructor loads the puzzle input file and makes it available to subclasses via the <span class="inline">Input</span> field. The <span class="inline">Description</span> property is for inheritors to implement to describe the puzzle they are solving. Lastly, surprise surprise,
            <span class="inline">GetAnswer</span> should be used by implementors (i.e. <a href="https://twitter.com/SteveHuwJohn">me</a>) to solve the puzzle and return the answer as a string. So far, <a href="https://adventofcode.com/">AoC</a> had only required integer answers but, I've been around the block and kept my options open.
        </p>
        <p>
            So, apart from some timing code (competitive, see?) and some other things added later, the main console app was:
        </p>
        <pre>        
var solutions = Assembly.GetExecutingAssembly()
                        .GetTypes()
                        .Where(t => t.IsSubclassOf(typeof(Solution)) && ! t.IsAbstract)
                        .OrderBy(t => t.Namespace)
                        .ThenBy(t => t.Name);

foreach (var solution in solutions)
{
    var instance = Activator.CreateInstance(solution) as Solution;
    
    var answer = instance.GetAnswer();

    CheckAnswer(instance.GetType(), answer);
}
</pre>
        <p>
            Where <span class="inline">CheckAnswer</span> would look in a text file for a line formatted <span class="inline">2021.5.1: abc</span> meaning that the answer to 2021, December the 5th, part one was <span class="inline">abc</span>.
            If they didn't match, it will throw an exception.
        </p>
        <p>
            Obviously, when embarking on each puzzle I didn't know the answer. Once I had the correct answer, I added it to the text file.
            The idea behind this mechanism was to prevent regressions as I anticipated code sharing somewhere down the line.
        </p>
        <p>
            So, my framework was largely in place, I was having fun and... possibly getting a bit cocky.
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Plain Sailing</div>
    <hr/>
    <div class="content">
        <p>
            So, now with the framework in place, I could take some time out every day to do a bit of <a href="https://en.wikipedia.org/wiki/Code_golf">code golf</a> of sorts (I wasn't going for the shortest solution... fastest... maybe.)
            Great fun, good mental exercise and, frankly a bit of a change from <a href="https://en.wikipedia.org/wiki/Business_logic">business logic</a>.
        </p>
        <p>
            I saw how quickly my solutions were executing (see console output below) and set myself a goal of having all solutions for the season execute in under one second, combined.
        </p>
        <pre>
2021  1.1: 1466                           0ms     Depth scan
2021  1.2: 1491                           1ms     
2021  2.1: 1746616                        0ms     Navigate forward
2021  2.2: 1741971043                     0ms     
2021  3.1: 2743844                        0ms     Power consumption
2021  3.2: 6677951                        0ms     
2021  4.1: 32844                          4ms     Squid bingo
2021  4.2: 4920                           3ms     
2021  5.1: 7297                           17ms    Hydrothermal vents
2021  5.2: 21038                          20ms    
2021  6.1: 391888                         0ms     Lanternfish parthenogenesis
2021  6.2: 1754597645339                  0ms     
2021  7.1: 348664                         0ms     Crab submarines
2021  7.2: 100220525                      0ms     
2021  7.X: Ceci n'est pas une intcode...  0ms     Easter egg (2019 CPU used)
2021  8.1: 294                            0ms     Old school displays
2021  8.2: 973292                         3ms     
2021  9.1: 498                            0ms     Lava level
2021  9.2: 1071000                        4ms     
2021 10.1: 370407                         2ms     Esoteric language parser
2021 10.2: 3249889609                     1ms     
2021 11.1: 1755                           3ms     Flashers
2021 11.2: 212                            6ms     
</pre>
        <p>
            I really can't heap enough praise on <a href="https://twitter.com/ericwastl">Eric Wastl</a> for the effort put into these puzzles, also the colleague who brought this to my attention,
            and the other colleagues who participated in this event. I'm an interminable nerd and this is completely my idea of fun.
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Multithreading</div>
    <hr/>
    <div class="content">
        <p>
            In the chat around this challenge, another colleague mentioned to me that there were previous years (which I hadn't noticed), and one which required you to iterate on a CPU emulator.
            This sounded really interesting to me as it reminded me of some homework I did for a friend who studied computer science at <a href="https://en.wikipedia.org/wiki/Department_of_Computer_Science,_University_of_Bristol">university</a>
            (and who went on to do something completely unrelated to CS.)
        </p>
        <p>
            So, the multithreading begins.
        </p>
        <p>
            It was the 2019 year that this particular challenge existed, so I started doing that one at the same time... why not?
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Oh, That's Why...</div>
    <hr/>
    <div class="content">
        <p>
            I'm not ashamed to admit to a level of OCD. In fact, it's probably what gives me the attention to detail and fastidiousness to be good at my job. It can also be a <a href="https://en.wiktionary.org/wiki/pain_in_the_arse">PITA</a>.
        </p>
        <p>
            Having folders in my solution explorer jumping from 2019 to 2021 bothered me. More than it should. First world problems, I know, but it probably drove me to solve the puzzles faster.
        </p>
        <p>
            And to not embark on another year's ones until the previous ones were completed.
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
<div class="post">
    <div class="title">Blue skies</div>
    <hr/>
    <div class="content">
        <p>
            Anyway, this is going well, I'm having fun and I presume my colleagues are also. This isn't some eerie foreshadowing, turns out they were.
        </p>
        <p>
            Plain sailing, blue skies... wasn't struggling with any of the puzzles. May have been neglecting some downtime from the computer though, but hey, if it's fun, it's fun right?
        </p>
        <p>
            Really enjoying the puzzles from both years (but still itching to finish them, so I could fill in the missing 2020 gap.)
        </p>
        <p>
            Then <a href="https://adventofcode.com/2021/day/15">2021.15</a> dropped.
        </p>
        <img src="logo.png" class="fox"/>
    </div>
</div>
</body>
</html>